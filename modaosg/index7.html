<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duplicar Saída do Título</title>
</head>
<body>
    <div id="output1"></div>
    <div id="output2"></div> <!-- Nova saída duplicada -->

    <script>
        // Função para fazer uma solicitação HTTP GET
        function httpGet(url, callback) {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200)
                    callback(xhr.responseText);
            }
            xhr.open("GET", url, true);
            xhr.send();
        }
    
        // Função para processar a resposta JSON e extrair o título
        function extractAndDisplay(jsonString, outputElement) {
            var data = JSON.parse(jsonString);
            var title = data.contents.split('-')[1].trim(); // Extrai o título após o '-' e remove espaços em branco
        
            // Exibir o título na página HTML e aplicar estilos
            outputElement.innerText = title;
        }
    
        // Função para fazer a solicitação HTTP e chamar a função para exibir o resultado
        function makeRequest() {
            var timestamp = new Date().getTime(); // Obter o timestamp atual
            var url = "https://api.allorigins.win/get?url=https://centova5.transmissaodigital.com:20024/currentsong?sid=1&_=" + timestamp; // Adicionar timestamp como parâmetro
            httpGet(url, function(responseText) {
                var outputElement1 = document.getElementById("output1");
                var outputElement2 = document.getElementById("output2"); // Nova saída
                extractAndDisplay(responseText, outputElement1);
                extractAndDisplay(responseText, outputElement2); // Duplicar a saída
            });
        }
    
        // Fazer a primeira solicitação e, em seguida, configurar o intervalo de 30 segundos
        makeRequest();
        setInterval(makeRequest, 30000); // 30 segundos em milissegundos
    </script>
</body>
</html>
